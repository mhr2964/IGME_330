(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}e.r(t),e.d(t,{qo:()=>i,eA:()=>o,MC:()=>q,HR:()=>A,DV:()=>T,gD:()=>M,hj:()=>F,jA:()=>I,uE:()=>P,lU:()=>C,gw:()=>x});var o,r,a,i,c,l,s,u,h,f,d,y,g,m,v,b,p=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(o,")")},w=!1,S=!1,k=Object.freeze({gain:.5,numSamples:256}),P=(new Uint8Array(k.numSamples/2),function(e){var t=window.AudioContext||window.webkitAudioContext;o=new t,r=new Audio,q(e),a=o.createMediaElementSource(r),(l=o.createBiquadFilter()).type="highshelf",(s=o.createBiquadFilter()).type="lowshelf",(i=o.createAnalyser()).fftSize=k.numSamples,(c=o.createGain()).gain.value=k.gain,a.connect(s),s.connect(l),l.connect(i),i.connect(c),c.connect(o.destination)}),q=function(e){r.src=e},T=function(){r.play()},A=function(){r.pause()},I=function(e){e=Number(e),c.gain.value=e},C=function(){w?(l.frequency.setValueAtTime(1e3,o.currentTime),l.gain.setValueAtTime(25,o.currentTime)):l.gain.setValueAtTime(0,o.currentTime)},x=function(){S?(s.frequency.setValueAtTime(1e3,o.currentTime),s.gain.setValueAtTime(15,o.currentTime)):s.gain.setValueAtTime(0,o.currentTime)},M=function(e){w=e},F=function(e){S=e};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==j(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===j(r)?r:String(r)),o)}var r}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var D,R=function(e,t){u=e.getContext("2d"),h=e.width,f=e.height,d=function(e,t,o,r,a,i){var c,l=e.createLinearGradient(0,0,0,a),s=function(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==o.return||o.return()}finally{if(l)throw i}}}}([{percent:1,color:"#98FFFC"},{percent:.1,color:"#FF98F1"},{percent:1,color:"#DD98FF"}]);try{for(s.s();!(c=s.n()).done;){var u=c.value;l.addColorStop(u.percent,u.color)}}catch(e){s.e(e)}finally{s.f()}return l}(u,0,0,0,f),y=t,g=new Uint8Array(y.fftSize/2),m="option-frequency",(v=new B(u,10,200,100,"black","white",3)).updateTargetIndex(10),(b=new B(u,10,200,200,"white","black",3)).updateTargetIndex(40)},B=function(){function e(t,n,o,r,a,i,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.radius=n,this.x=o,this.y=r,this.startx=o,this.starty=r,this.fillColor=a,this.strokeColor=i,this.lineWidth=c,this.data=[0],this.targetIndex=0,Object.seal(this)}var t,n;return t=e,(n=[{key:"updateTargetIndex",value:function(e){this.targetIndex=e}},{key:"updateAudioData",value:function(e){this.data=e}},{key:"draw",value:function(){u.save(),u.fillStyle=this.fillColor,u.strokeStyle=this.strokeColor,u.lineWidth=this.lineWidth,u.beginPath(),u.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),u.closePath(),u.fill(),u.stroke(),u.restore()}},{key:"update",value:function(e){switch(e){case"option-frequency":this.x=100*Math.cos(this.data[this.targetIndex])+400,this.y=this.starty;break;case"option-time-domain":this.y=100*Math.sin(this.data[this.targetIndex])+400,this.x=this.startx}}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),G={showGradient:!1,showBars:!1,showCircles:!1,showNoise:!1,showInvert:!1,showEmboss:!1},N=function e(){setTimeout(e,1e3/60),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(m){case"option-frequency":y.getByteFrequencyData(g);break;case"option-time-domain":y.getByteTimeDomainData(g)}if(u.save(),u.fillStyles="black",u.globalAlpha=.1,u.fillRect(0,0,h,f),u.restore(),e.showGradient&&(u.save(),u.fillStyle=d,u.globalAlpha=.3,u.fillRect(0,0,h,f),u.restore()),e.showBars){var t=h-1*g.length-2,n=t/g.length;u.save(),u.fillStyle="rgba(255,255,255,0.50)",u.strokeStyle="rgba(0,0,0,0.50)";for(var o=0;o<g.length;o++)u.fillStyle="rgba(".concat(128-2*g[o]+10,",").concat(g[o]+10,",").concat(o/g.length*255+10,",1)"),u.fillRect(1+o*(n+1),356-g[o]+100,n,300);u.restore(),u.save(),u.strokeStyle="white",u.lineWidth=5;var r=-1e3;u.beginPath(),u.moveTo(r,450),r=-t/g.length+10;var a,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(g);try{for(i.s();!(a=i.n()).done;){var c=a.value;u.lineTo(r,450-c),r+=u.canvas.width/g.length}}catch(e){i.e(e)}finally{i.f()}u.stroke(),u.closePath(),u.restore()}if(e.showCircles){var l=f/2;u.save(),u.globalAlpha=.5;for(var s=g.length/4;s<g.length;s++){var w=g[s]/255,S=w*l;u.save(),u.beginPath(),u.fillStyle=p(221,152,255,.1-w/10),u.arc(h,0,1.5*S,0,2*Math.PI,!1),u.fill(),u.closePath(),u.restore(),u.save(),u.beginPath(),u.fillStyle=p(255,152,241,.34-w/3),u.arc(h,0,S,0,2*Math.PI,!1),u.fill(),u.closePath(),u.restore(),u.save(),u.beginPath(),u.fillStyle=p(255,207,248,.5-w/5),u.arc(h,0,.5*S,0,2*Math.PI,!1),u.fill(),u.closePath(),u.restore()}for(var k=0;k<g.length/4;k++){var P=g[k]/255,q=P*l;u.save(),u.beginPath(),u.fillStyle=p(221,152,255,.1-P/10),u.arc(0,0,1.5*q,0,2*Math.PI,!1),u.fill(),u.closePath(),u.restore(),u.save(),u.beginPath(),u.fillStyle=p(255,152,241,.34-P/3),u.arc(0,0,q,0,2*Math.PI,!1),u.fill(),u.closePath(),u.restore(),u.save(),u.beginPath(),u.fillStyle=p(255,207,248,.5-P/5),u.arc(0,0,.5*q,0,2*Math.PI,!1),u.fill(),u.closePath(),u.restore()}u.restore(),v.updateAudioData(g),b.updateAudioData(g),v.update(m),b.update(m),v.draw(),b.draw()}for(var T=u.getImageData(0,0,h,f),A=T.data,I=A.length,C=T.width,x=0;x<I;x+=4)if(e.showNoise&&Math.random()<.002&&(A[x]=A[x+1]=A[x+2]=255),e.showInvert){var M=A[x],F=A[x+1],j=A[x+2];A[x]=255-M,A[x+1]=255-F,A[x+2]=255-j}if(e.showEmboss)for(var E=0;E<I;E++)E%4!=3&&(A[E]=127+2*A[E]-A[E+4]-A[E+4*C]);u.putImageData(T,0,0)}(G)};function z(){var e=new XMLHttpRequest;e.onload=function(e){console.log("In onload - HTTP Status Code = ".concat(e.target.status));var n,r=e.target.responseText;try{n=JSON.parse(r)}catch(e){document.querySelector("#output").innerHTML="JSON.parse(text) failed!"}var a=n.data;document.querySelector("title").textContent=a.title,G.showBars=a.initParams.showBars,G.showCircles=a.initParams.showCircles,G.showGradient=a.initParams.showGradient,G.showEmboss=a.initParams.showEmboss,G.showInvert=a.initParams.showInvert,G.showNoise=a.initParams.showNoise,D=a.filenames;for(var c,l=document.querySelector("#select-track"),s=0;s<D.length;s++)c+='<option value="'.concat(D[s],'"'),0==s&&(c+=" selected"),c+=">".concat(D[s].substring(6,D[s].length-1-3),"</option>");l.innerHTML=c,function(){var e;console.log("init called"),console.log("Testing utils.getRandomColor() import: ".concat("rgba(".concat((e=function(){return 185*Math.random()+35})(),",").concat(e(),",").concat(e(),",1)"))),P(D[0]);var n=document.querySelector("canvas");(function(e){var n=document.querySelector("#btn-fs"),r=document.querySelector("#btn-play");n.onclick=function(t){var n;console.log("goFullscreen() called"),(n=e).requestFullscreen?n.requestFullscreen():n.mozRequestFullscreen?n.mozRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()},r.onclick=function(e){console.log("audioCtx.state before = ".concat(o.state)),"suspended"==o.state&&o.resume(),console.log("audioCtx.state after = ".concat(o.state)),"no"==e.target.dataset.playing?(T(),e.target.dataset.playing="yes"):(A(),e.target.dataset.playing="no")};var a=document.querySelector("#slider-volume"),i=document.querySelector("#label-volume");a.oninput=function(e){I(e.target.value),i.innerHTML=Math.round(e.target.value/2*100)},a.dispatchEvent(new Event("input")),document.querySelector("#select-track").onchange=function(e){q(e.target.value),"yes"==r.dataset.playing&&r.dispatchEvent(new MouseEvent("click"))};var c=document.querySelector("#cb-gradient"),l=document.querySelector("#cb-bar"),s=document.querySelector("#cb-circles"),u=document.querySelector("#cb-noise"),h=document.querySelector("#cb-invert"),f=document.querySelector("#cb-emboss");c.checked=G.showGradient,l.checked=G.showBars,s.checked=G.showCircles,u.checked=G.showNoise,h.checked=G.showInvert,f.checked=G.showEmboss,c.onchange=function(){G.showGradient=c.checked},l.onchange=function(){G.showBars=l.checked},s.onchange=function(){G.showCircles=s.checked},u.onchange=function(){G.showNoise=u.checked},h.onchange=function(){G.showInvert=h.checked},f.onchange=function(){G.showEmboss=f.checked},document.querySelector("#cb-highshelf").checked=t.highshelf,document.querySelector("#cb-highshelf").onchange=function(e){M(e.target.checked),C()},C(),document.querySelector("#cb-lowshelf").checked=t.lowshelf,document.querySelector("#cb-lowshelf").onchange=function(e){F(e.target.checked),x()},x(),document.querySelector("#datatype").onchange=function(e){var t;t=e.target.value,m=t}})(n),R(n,i),N()}()},e.onerror=function(e){return console.log("In onerror - HTTP Status Code = ".concat(e.target.status))},e.open("GET","data/av-data.json"),e.send()}window.onload=function(){console.log("window.onload called"),z()}})();